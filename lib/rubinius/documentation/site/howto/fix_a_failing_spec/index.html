<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Rubinius Documentation - Howto - Fix a Failing Spec</title>
    <link rel="stylesheet" type="text/css" href="/stylesheet.css" media="screen">
    <meta name="generator" content="nanoc 3.1.5">
  </head>
  <body>
    <div id="main">
      <h1 id="how-to-fix-a-failing-spec">How to Fix a Failing Spec</h1>

<p>Make sure you have read:</p>

<ul>
  <li><a href="/getting_started">Getting Started</a></li>
  <li><a href="/dev/specs">Specs</a></li>
</ul>

<p>Then, follow these steps to fix a failing spec:</p>

<ol>
  <li>Run <code>rake</code> to ensure that all CI specs are passing.</li>
  <li>Run <code>bin/mspec spec/some/spec_file.rb</code> to confirm the spec fails.</li>
  <li>Edit a file somewhere in Rubinius (probably under the kernel directory).</li>
  <li>Run <code>rake build</code> to build your change.</li>
  <li>Run <code>bin/mspec spec/some/spec_file.rb</code> to see if your change makes the
spec pass.</li>
  <li>Repeat until your spec passes.</li>
  <li>Run <code>rake</code> to ensure there are no regressions.</li>
  <li>Change directory to Rubinius root if not already there.</li>
  <li>Run <code>git status, git add, git commit</code>, etc. Any changes made to the spec
files under the spec/ruby directory must be in a different commit from
changes made to other Rubinius source code files.</li>
  <li>Run <code>git format-patch origin</code>, which will extract commits that the current
branch accumulated since the last pull from origin, or `git format-patch
-N&rsquo;, where N is the number (1, 2, etc.) of commits for which you want to
generate patches.</li>
  <li>Create a gist with your patch and link to it in a ticket on the issue
tracker at http://github.com/evanphx/rubinius/issues. You can add multiple
patches to one ticket.</li>
</ol>

<p>When your patch is accepted by the Rubinius project, you&rsquo;ll get a commit bit
for the Rubinius repository. Let Evan know what your Github username is.</p>

    </div>

    <div id="sidebar">
      <h2>Table of Contents</h2>
      <ul>
<li><a href="/">What is Rubinius</a></li>
<li><a href="/getting_started/">Getting Started</a></li>
<li><a href="/common_problems/">Common Problems</a></li>
<li><a href="/contributing/">Contributing</a></li>
</ul>
<h3>Tools</h3>
<ul>
<li><a href="/tools/profiler/">Profiler</a></li>
<li><a href="/tools/debugger/">Debugger</a></li>
</ul>
<h3>Developing</h3>
<ul>
<li><a href="/dev/specs/">Specs</a></li>
<li><a href="/dev/build_system/">Build System</a></li>
<li><a href="/dev/bootstrapping/">Bootstrapping</a></li>
<li><a href="/dev/compiler/">Bytecode Compiler</a></li>
<li><a href="/dev/style_guide/">Style Guide</a></li>
<li><a href="/dev/reading_list/">Reading List</a></li>
<li><a href="/glossary/">Glossary</a></li>
</ul>
<h3>Howto</h3>
<ul>
<li><a href="/howto/write_a_ticket/">Write a Ticket</a></li>
<li><a href="/howto/write_a_ruby_spec/">Write a Ruby spec</a></li>
<li><span class="active" title="You're here.">Fix a Failing Spec</span></li>
</ul>

    </div>
  </body>
</html>
